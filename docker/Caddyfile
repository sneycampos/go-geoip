{
    #acme_ca https://acme-staging-v02.api.letsencrypt.org/directory
    #acme_ca https://acme.zerossl.com/v2/DV90
    #email sneycampos@gmail.com
}

geoip.sney.eu {
    tls {
        dns cloudflare {env.CF_API_TOKEN}
        resolvers 1.1.1.1
    }

    root * /app/static
    encode gzip

    file_server {
        hide .git
    }

    header {
        ?Cache-Control "max-age=1800"
        # Prevent cache revalidation with common cache-busting headers
        -If-Modified-Since
        -If-None-Match
    }

    handle /favicon.ico {
        respond 204
    }

    # Proxy only specific routes
    handle /ip/* {
        reverse_proxy app:8888
    }
}